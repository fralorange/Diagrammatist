<Window x:Class="Diagrammatist.Presentation.WPF.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Diagrammatist.Presentation.WPF.Views"
        xmlns:vm="clr-namespace:Diagrammatist.Presentation.WPF.ViewModels"
        xmlns:components="clr-namespace:Diagrammatist.Presentation.WPF.Views.Components"
        xmlns:md="clr-namespace:MvvmDialogs;assembly=MvvmDialogs"
        xmlns:lex="http://wpflocalizeextension.codeplex.com"
        lex:LocalizeDictionary.DesignCulture="en"
        lex:ResxLocalizationProvider.DefaultAssembly="Diagrammatist.Presentation.WPF"
        lex:ResxLocalizationProvider.DefaultDictionary="Resources.Localization.MainResources"
        md:DialogServiceViews.IsRegistered="True"
        d:DataContext="{d:DesignInstance Type=vm:MainViewModel}"
        mc:Ignorable="d"
        Title="MainWindow" Height="557" Width="985">
    <Window.Resources>
        <Style TargetType="GridSplitter" x:Key="Base">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Focusable" Value="False" />
        </Style>
        <Style TargetType="GridSplitter" x:Key="Vertical" BasedOn="{StaticResource Base}">
            <Setter Property="VerticalAlignment" Value="Stretch" />
            <Setter Property="Width" Value="3" />
        </Style>
        <Style TargetType="GridSplitter" x:Key="Horizontal" BasedOn="{StaticResource Base}">
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="Height" Value="3" />
        </Style>
    </Window.Resources>
    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="{lex:Loc File}">
                <MenuItem Header="{lex:Loc New}"
                          Command="{Binding MenuNewCommand}"/>
                <MenuItem Header="{lex:Loc Open}"
                          Command="{Binding MenuOpenCommand}"/>
                <Separator/>
                <MenuItem Header="{lex:Loc Close}"
                          Command="{Binding MenuCloseCommand}"
                          IsEnabled="{Binding HasCanvasFlag}"/>
                <MenuItem Header="{lex:Loc CloseAll}"
                          Command="{Binding MenuCloseAllCommand}"
                          IsEnabled="{Binding HasCanvasFlag}"/>
                <Separator/>
                <MenuItem Header="{lex:Loc Save}"
                          Command="{Binding MenuSaveCommand}"
                          IsEnabled="{Binding HasChangesFlag}"/>
                <MenuItem Header="{lex:Loc SaveAs}"
                          Command="{Binding MenuSaveAsCommand}"
                          IsEnabled="{Binding HasCanvasFlag}"/>
                <MenuItem Header="{lex:Loc SaveAll}"
                          Command="{Binding MenuSaveAllCommand}"
                          IsEnabled="{Binding HasGlobalChangesFlag}"/>
                <Separator/>
                <MenuItem Header="{lex:Loc Export}"
                          Command="{Binding MenuExportCommand}"
                          IsEnabled="{Binding HasCanvasFlag}"/>
                <Separator/>
                <MenuItem Header="{lex:Loc Exit}"
                          Command="{Binding MenuExitCommand}"/>
            </MenuItem>
            <MenuItem Header="{lex:Loc Edit}">
                <MenuItem Header="{lex:Loc Undo}"
                          Command="{Binding MenuUndoCommand}"
                          IsEnabled="{Binding HasUndoFlag}"/>
                <MenuItem Header="{lex:Loc Redo}"
                          Command="{Binding MenuRedoCommand}"
                          IsEnabled="{Binding HasRedoFlag}"/>
            </MenuItem>
            <MenuItem Header="{lex:Loc Canvas}">
                <MenuItem Header="{lex:Loc ChangeSize}"
                          Command="{Binding MenuChangeSizeCommand}"
                          IsEnabled="{Binding HasCanvasFlag}"/>
            </MenuItem>
            <MenuItem Header="{lex:Loc View}">
                <MenuItem Header="{lex:Loc ZoomIn}"
                          Command="{Binding MenuZoomInCommand}"
                          IsEnabled="{Binding HasCanvasFlag}"/>
                <MenuItem Header="{lex:Loc ZoomOut}"
                          Command="{Binding MenuZoomOutCommand}"
                          IsEnabled="{Binding HasCanvasFlag}"/>
                <MenuItem Header="{lex:Loc ResetZoom}"
                          Command="{Binding MenuZoomResetCommand}"
                          IsEnabled="{Binding HasCanvasFlag}"/>
                <Separator/>
                <MenuItem Header="{lex:Loc Grid}"
                          Command="{Binding MenuEnableGridCommand}"
                          IsEnabled="{Binding HasCanvasFlag}"/>
            </MenuItem>
            <MenuItem Header="{lex:Loc Preferences}">
                <MenuItem Header="{lex:Loc General}"
                          Command="{Binding MenuGeneralPreferencesCommand}"/>
            </MenuItem>
            <MenuItem Header="{lex:Loc Help}">
                <MenuItem Header="{lex:Loc ViewHelp}"
                          Command="{Binding MenuHelpCommand}"/>
                <Separator/>
                <MenuItem Header="{lex:Loc AboutApp}"
                          Command="{Binding MenuAboutCommand}"/>
            </MenuItem>
        </Menu>
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="0.30*"
                               MinHeight="200"
                               MaxHeight="400"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="0.15*"
                                  MinWidth="200"
                                  MaxWidth="400"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="0.15*"
                                  MinWidth="200"
                                  MaxWidth="400"/>
            </Grid.ColumnDefinitions>

            <components:ToolbarComponent Grid.Row="0"
                                         Grid.ColumnSpan="3"
                                         Style="{StaticResource Component}"/>
            <components:FiguresComponent Grid.Row="1"
                                         Grid.RowSpan="2"
                                         Grid.Column="0"
                                         Style="{StaticResource Component}"/>
            
            <!--Splits FiguresComponent from CanvasComponent-->
            <GridSplitter Grid.Row="1" 
                          Grid.RowSpan="2" 
                          Grid.Column="0" 
                          Style="{StaticResource Vertical}" 
                          HorizontalAlignment="Right"/>

            <Grid Grid.Row="1" 
                  Grid.RowSpan="2" 
                  Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <components:CanvasComponent Grid.Row="0"
                                            Style="{StaticResource Component}"/>
                <components:TabsComponent Grid.Row="1"
                                          Style="{StaticResource Component}"/>
            </Grid>

            <!--Splits ObjectTreeComponent and PropertiesComponent from CanvasComponent-->
            <GridSplitter Grid.Row="1" 
                          Grid.RowSpan="2" 
                          Grid.Column="2" 
                          Style="{StaticResource Vertical}" 
                          HorizontalAlignment="Left"/>

            <components:ObjectTreeComponent Grid.Row="1"
                                            Grid.Column="2"
                                            Style="{StaticResource Component}"/>
            
            <!--Splits PropertiesComponent from ObjectTreeComponent-->
            <GridSplitter Grid.Row="2" 
                          Grid.Column="2" 
                          Style="{StaticResource Horizontal}"
                          VerticalAlignment="Top" />
            
            <components:PropertiesComponent Grid.Row="2"
                                            Grid.Column="2"
                                            Style="{StaticResource Component}"/>
        </Grid>
    </DockPanel>
</Window>
